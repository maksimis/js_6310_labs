function applySpringStyles() {
    const style = document.createElement('style');
    style.id = 'spring-styles';
    style.textContent = `
        /* 1. –§–æ–Ω —Å—Ç—Ä–∞–Ω–∏—Ü—ã */
        body {
            background-color: #f8fdf8 !important;
        }
        
        /* 2. –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ */
        body {
            color: #2d5016 !important;
        }
        
        /* 3. –®–∞–ø–∫–∞ —Å–∞–π—Ç–∞ */
        header, .header, #header {
            background-color: #e8f5e9 !important;
            border-bottom: 2px solid #a5d6a7 !important;
        }
        
        /* 4. –°—Å—ã–ª–∫–∏ - –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–≤–µ—Ç */
        a {
            color: #388e3c !important;
        }
        
        /* 5. –°—Å—ã–ª–∫–∏ - —Ü–≤–µ—Ç –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
        a:hover {
            color: #ff4081 !important;
        }
        
        /* 6. –ö–Ω–æ–ø–∫–∏ */
        button, .button, input[type="submit"] {
            background-color: #4caf50 !important;
            border-radius: 6px !important;
        }
        
        /* 7. –ö–∞—Ä—Ç–æ—á–∫–∏ –∏ –±–ª–æ–∫–∏ */
        .card, .panel, .block {
            background-color: white !important;
            border: 1px solid #e8f5e9 !important;
        }
        
        /* 8. –¢–∞–±–ª–∏—Ü—ã */
        table {
            border: 1px solid #c8e6c9 !important;
        }
        
        /* 9. –ó–∞–≥–æ–ª–æ–≤–∫–∏ */
        h1, h2, h3 {
            color: #1b5e20 !important;
        }
        
        /* 10. –§—É—Ç–µ—Ä */
        footer, .footer {
            background-color: #e8f5e9 !important;
        }
        
        /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ */
        nav, .navigation, .menu {
            background-color: #f1f8e9 !important;
            border-radius: 8px !important;
            padding: 10px !important;
        }
    `;
    document.head.appendChild(style);
}

function removeSpringStyles() {
    const style = document.getElementById('spring-styles');
    if (style) style.remove();
}

function createToggleButton() {
    const button = document.createElement('button');
    button.id = 'spring-toggle';
    button.innerHTML = 'üå± –í–∫–ª—é—á–∏—Ç—å –≤–µ—Å–µ–Ω–Ω–∏–π —Å—Ç–∏–ª—å';
    
    Object.assign(button.style, {
        position: 'fixed',
        top: '15px',
        right: '15px',
        zIndex: '10000',
        background: '#4caf50',
        color: 'white',
        border: 'none',
        borderRadius: '6px',
        padding: '10px 16px',
        fontSize: '14px',
        cursor: 'pointer',
        boxShadow: '0 2px 8px rgba(0,0,0,0.2)',
        transition: 'all 0.2s ease'
    });
    
    button.onclick = function() {
        const isEnabled = localStorage.getItem('springStyle') === 'true';
        
        if (isEnabled) {
            removeSpringStyles();
            localStorage.setItem('springStyle', 'false');
            button.innerHTML = 'üå± –í–∫–ª—é—á–∏—Ç—å –≤–µ—Å–µ–Ω–Ω–∏–π —Å—Ç–∏–ª—å';
            button.style.background = '#4caf50';
        } else {
            applySpringStyles();
            localStorage.setItem('springStyle', 'true');
            button.innerHTML = 'üçÉ –í—ã–∫–ª—é—á–∏—Ç—å —Å—Ç–∏–ª—å';
            button.style.background = '#757575';
        }
    };
    
    document.body.appendChild(button);
}

function demonstrateDOMUsage() {
    console.log("üîß Demonstrating DOM methods:");
    
    // getElementById
    const header = document.getElementById('header');
    if (header) {
        console.log("‚úÖ getElementById: header found");
    }
    
    // querySelector —Å —Å–ª–æ–∂–Ω—ã–º —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–º (–¥–≤–∞ –∫–ª–∞—Å—Å–∞)
    const mainContent = document.querySelector('main.container');
    if (mainContent) {
        console.log("‚úÖ querySelector (complex): main.container found");
        
        // parentElement
        const parent = mainContent.parentElement;
        if (parent) {
            console.log("‚úÖ parentElement: parent found");
        }
        
        // children
        const children = mainContent.children;
        console.log(`‚úÖ children: ${children.length} child elements found`);
    }
    
    // querySelectorAll
    const links = document.querySelectorAll('a');
    console.log(`‚úÖ querySelectorAll: ${links.length} links found`);
}

// –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
function init() {
    console.log("üöÄ Initializing KAI Spring Style extension");
    
    createToggleButton();
    demonstrateDOMUsage();
    
    // –ü—Ä–∏–º–µ–Ω—è–µ–º —Å—Ç–∏–ª–∏ –µ—Å–ª–∏ –æ–Ω–∏ –±—ã–ª–∏ –≤–∫–ª—é—á–µ–Ω—ã
    const isEnabled = localStorage.getItem('springStyle') === 'true';
    if (isEnabled) {
        applySpringStyles();
        const btn = document.getElementById('spring-toggle');
        btn.innerHTML = 'üçÉ –í—ã–∫–ª—é—á–∏—Ç—å —Å—Ç–∏–ª—å';
        btn.style.background = '#757575';
    }
    
    console.log("‚úÖ Extension initialization complete");
}

if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
} else {
    init();
}